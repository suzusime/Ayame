# 文目スクリプトの基本

## 実行順序
文目スクリプトは「行」を単位として基本的には上から順に実行されます。

ただし、if-elseやサブルーチンの呼び出しによってフロー制御が行われる場合はこの限りではありません。

## 各行の形式
### 地の文
```
俺たちはのぼり続ける、この長い坂道を。
```
このように普通に文章を書くと、それは地の文として表示されます。

```
衝撃の事実が告げられた。
まさか、俺のいない間にそんなことになっていたとは。
```
改行を行うとその間にクリック待ちが入ります。

```
衝撃の事実が告げられた。

まさか、俺のいない間にそんなことになっていたとは。
```
空行を挟むと、そこに改ページが入ります（当然クリック待ちもします）。

### 台詞
```
七瀬	おはようございます。
```
このように「発話名＋タブ＋台詞」のように入力した行は、キャラクターの台詞として表示されます。

```
七瀬	おはようございます。
七瀬	今日も良い天気ですね。
```
改行を行うとクリック待ちが入るのも同じです。

```
七瀬	おはようございます。
	今日も良い天気ですね。
```
2行目以降は名前を省略し、行をタブから始めても構いません。

このように、発話者名が省略された場合は前の発話者名を受け継ぎます。

```
七瀬	おはようございます。
	今日も良い天気ですね。

	でもちょっと寒いです。
```
こういう風に空行を挟むと改ページになるのも同じです。
この場合も発話者名が省略された場合は前の発話者名を受け継ぎます。

### ラベル行
```
#start_main
```
このように、#から始める行はラベルになります。

ラベルはジャンプ構文での飛び先などに使います。
使い方については後述します。

## 函数について
普通に文章を表示する以外の全てのこと、例えば立ち絵や背景の表示・移動・変更・消去や変数の操作、選択肢の表示やフロー制御は函数を用いて行います。

函数を呼び出すときは文章に埋め込みます。
函数は必ず返り値を持ち、その結果が呼び出された場所に埋め込まれた文章が表示されます。

例えば、

```
この坂は[echo saka_mei]という名前らしい。
```
という行があるとしましょう。

`[echo saka_mei]`は `echo` という函数を第1引数に `saka_mei` を指定して呼び出すという記法です。
後述するようにecho函数は変数の中身を返り値として返すという函数ですから、例えば `saka_mei` の内容が `産寧坂` であれば、echo函数の返り値は `産寧坂` になります。

よって、この行では

```
この坂は産寧坂という名前らしい。
```

という地の文が表示されることになります。

## 型
この言語には型がありません。
全ては文字列として扱われます。

函数の引数及び返り値は全て文字列です。
引数を定義するlet函数など、返り値が不要な函数もありますが、このような函数は空文字列を返します。

数値や真理値を引数として必要とする函数は、実行時に文字列を解釈して変換します。
この変換ができない場合は実行時エラーとなります。

### 数値
- "0-9"の半角数値の列

### 真理値
#### 真と解釈されるもの
- `true`
- 0以外の数値

#### 偽と解釈されるもの
- `false`
- `0`
- 空文字列

## 函数一覧
[こちら](函数一覧.md)

## チュートリアル
1. [変数を使おう](tutorial/変数.md)
2. [フロー制御をしよう](tutorial/フロー制御.md)
3. [背景を出そう](tutorial/背景.md)
4. [立ち絵を出そう](tutorial/立ち絵.md)
5. [音楽を流そう](tutorial/音楽.md)
6. [選択肢を出そう](tutorial/選択肢.md)

